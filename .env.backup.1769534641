# Supabase Database (PostgreSQL)
DATABASE_URL="postgresql://postgres.dcxnduxjczwzsxtitgjx:yV4GRWreciMSNLh5@aws-1-ap-south-1.pooler.supabase.com:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://postgres.dcxnduxjczwzsxtitgjx:yV4GRWreciMSNLh5@aws-1-ap-south-1.pooler.supabase.com:5432/postgres"

# Supabase Auth
NEXT_PUBLIC_SUPABASE_URL="https://dcxnduxjczwzsxtitgjx.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjeG5kdXhqY3p3enN4dGl0Z2p4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzUyODg5MTMsImV4cCI6MjA1MDg2NDkxM30.gfC7vxQCWcLQzE5GqxU-WNfvjrwuMiRIp9KWM_q8_PE"
SUPABASE_SERVICE_ROLE_KEY="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRjeG5kdXhqY3p3enN4dGl0Z2p4Iiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTczNTI4ODkxMywiZXhwIjoyMDUwODY0OTEzfQ.uWqxGCcHjOXDy0L8sAJLCmBL7kCvDNxzD_5dRCVcvfU"

# Environment
NODE_ENV=production
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ============================================
# WARMUP ENGINE - BATCH PROCESSING (Scalable)
# ============================================

# Number of mailboxes to process per batch
# Small: 50, Medium: 100, Large: 200
WARMUP_BATCH_SIZE=100

# Maximum concurrent email sends (parallel)
# Small: 10, Medium: 20, Large: 50
WARMUP_MAX_CONCURRENT=20

# Delay between batches (milliseconds)
# Prevents overwhelming the system
WARMUP_BATCH_DELAY_MS=5000

# Send stagger (natural spacing between initiating sends)
# Min: 1 second, Max: 5 seconds
WARMUP_STAGGER_MIN_MS=1000
WARMUP_STAGGER_MAX_MS=5000

# Per-Mailbox Cooldown (prevents same mailbox from sending too frequently)
# After a mailbox sends an email, it waits this long before sending again
# This creates natural sending patterns - other mailboxes send during the gap
# Min: 3 minutes (180000ms), Max: 10 minutes (600000ms)
WARMUP_MAILBOX_COOLDOWN_MIN_MS=180000
WARMUP_MAILBOX_COOLDOWN_MAX_MS=600000
WARMUP_MAILBOX_COOLDOWN_RANDOMIZE=true

# ============================================
# GLOBAL SAFETY LIMITS
# ============================================

# Maximum emails per hour (system-wide)
# Prevents runaway sending
WARMUP_GLOBAL_HOURLY_LIMIT=10000

# Maximum emails per minute (system-wide)
# Short-term burst protection
WARMUP_GLOBAL_MINUTE_LIMIT=200

# Maximum emails per hour (per user, across all their mailboxes)
# Prevents single user from consuming all resources
WARMUP_USER_HOURLY_LIMIT=500

# User daily cap multiplier (e.g., 1.2 = 120% of plan limit as hard cap)
WARMUP_USER_DAILY_CAP=1.2

# ============================================
# QUOTA ENFORCEMENT
# ============================================

# Minimum daily quota per mailbox
# Default: 30 emails/day minimum
WARMUP_MIN_DAILY_QUOTA=30

# Priority boost for mailboxes behind quota
# Higher value = more aggressive catch-up
WARMUP_QUOTA_PRIORITY_BOOST=2.0

# ============================================
# SCHEDULING
# ============================================

# How often to run warmup cycles (minutes)
# Smaller = more frequent sends, better quota filling
# Recommended: 10-15 minutes
WARMUP_CRON_INTERVAL_MINUTES=15

# Spread sends over window (minutes)
# Helps distribute load naturally
WARMUP_CRON_SPREAD_MINUTES=10

# ============================================
# TIMEOUTS
# ============================================

# SMTP connection timeout (milliseconds)
WARMUP_SMTP_TIMEOUT_MS=30000

# IMAP connection timeout (milliseconds)
WARMUP_IMAP_TIMEOUT_MS=30000

# Rate limit backoff delay (milliseconds)
# How long to wait when rate limited
WARMUP_RATE_LIMIT_BACKOFF_MS=10000

# ============================================
# MONITORING & METRICS
# ============================================

# Enable detailed performance metrics
# Recommended: true for production
WARMUP_ENABLE_DETAILED_METRICS=true

# How long to keep metrics data (days)
WARMUP_METRICS_RETENTION_DAYS=30

# ============================================
# HORIZONTAL SCALING (Multi-Worker)
# ============================================

# Enable distributed mode
# Set to 'true' when running multiple workers
WARMUP_DISTRIBUTED_MODE=false

# Worker ID (1, 2, 3, ...)
# Each worker must have unique ID
WARMUP_WORKER_ID=1

# Total number of workers in cluster
# Workers distribute mailboxes via hash: mailbox_id % WORKER_COUNT
WARMUP_WORKER_COUNT=1

# ============================================
# LEGACY WARMUP SETTINGS (Still Used)
# ============================================

# Send delays (minutes) - used for individual sends
WARMUP_SEND_DELAY_MIN=3
WARMUP_SEND_DELAY_MAX=15

# Reply delays (minutes) - when scheduling auto-replies
WARMUP_REPLY_DELAY_MIN=5
WARMUP_REPLY_DELAY_MAX=240

# Global rate limits (legacy - use WARMUP_ENGINE settings above)
WARMUP_GLOBAL_HOURLY_LIMIT=500
WARMUP_GLOBAL_MINUTE_LIMIT=20

# Check interval (legacy - use WARMUP_CRON_INTERVAL_MINUTES)
WARMUP_CHECK_INTERVAL_MS=300000

# Verbose logging
WARMUP_VERBOSE_LOGGING=false

# ============================================
# EXAMPLE CONFIGURATIONS
# ============================================

# SMALL DEPLOYMENT (< 1,000 mailboxes)
# WARMUP_BATCH_SIZE=50
# WARMUP_MAX_CONCURRENT=10
# WARMUP_CRON_INTERVAL_MINUTES=15
# WARMUP_WORKER_COUNT=1

# MEDIUM DEPLOYMENT (1,000 - 10,000 mailboxes)
# WARMUP_BATCH_SIZE=100
# WARMUP_MAX_CONCURRENT=20
# WARMUP_CRON_INTERVAL_MINUTES=15
# WARMUP_DISTRIBUTED_MODE=true
# WARMUP_WORKER_COUNT=3

# LARGE DEPLOYMENT (10,000 - 100,000 mailboxes)
# WARMUP_BATCH_SIZE=200
# WARMUP_MAX_CONCURRENT=50
# WARMUP_CRON_INTERVAL_MINUTES=10
# WARMUP_GLOBAL_HOURLY_LIMIT=50000
# WARMUP_DISTRIBUTED_MODE=true
# WARMUP_WORKER_COUNT=10
